#include "{{classname}}.h"

using namespace std;
using namespace Tiny;

{{#operations}}

    {{classname}}::{{classname}}()
    {

    }

    {{classname}}::~{{classname}}()
    {

    }
    {{! Method }}
    {{#operation}}

        Response<
        {{#returnType}}
            {{#returnContainer}}
                {{#isArray}}
                    {{returnType}}<{{returnBaseType}}>
                {{/isArray}}
            {{/returnContainer}}
            {{^returnContainer}}
                {{returnType}}
            {{/returnContainer}}
        {{/returnType}}
        {{^returnType}}
            String
        {{/returnType}}
        >
        {{classname}}::
        {{! Method name }}
        {{nickname}}(
        {{! Params }}
        {{#allParams}}
        {{! Arrays }}
            {{#isContainer}}{{{dataType}}}<{{baseType}}> {{paramName}}{{/isContainer}}
            {{! Normal types/objects }}
            {{^isContainer}}{{{dataType}}} {{paramName}}{{/isContainer}}
            {{^-last}}, {{/-last}}
        {{/allParams}}
        )
        {{! Method start}}
        {
            std::string url = basepath + "{{{path}}}"; //{{#pathParams}}{{{paramName}}} {{/pathParams}}
            // Query    | {{#queryParams}}{{paramName}} {{/queryParams}}
            // Headers  | {{#headerParams}}{{paramName}} {{/headerParams}}
            // Headers  | {{#formParams}}{{paramName}} {{/formParams}}
            // Body     | {{#bodyParam}}{{paramName}}{{/bodyParam}}

            {{#pathParams}}
                string s_{{paramName}}("{");
                s_{{paramName}}.append("{{{baseName}}}");
                s_{{paramName}}.append("}");

                int pos = url.find(s_{{paramName}});

                url.erase(pos, s_{{paramName}}.length());
                url.insert(pos, stringify({{paramName}})); //stringify(&{{paramName}}, "{{dataType}}"));
            {{/pathParams}}

            HTTPClient http;
            http.begin(String(url.c_str()), test_root_ca); //HTTPS example connection

            // Send Request
            // METHOD | {{httpMethod}}
            int httpCode = http.{{httpMethod}}();

            // Handle Request
            String payload = http.getString();
            std::string payload_std_string(payload.c_str());
            http.end();

        {{! Declaration of obj }}
        {{#returnType}}
            {{#returnContainer}}
                {{#isArray}}
                    {{returnType}}<{{returnBaseType}}>
                {{/isArray}}
            {{/returnContainer}}
            {{^returnContainer}}
                {{returnType}}
            {{/returnContainer}}
        {{/returnType}}
        {{^returnType}}
            String
        {{/returnType}}
        {{! Obj var name }}
        obj

        {{! Array constructor }}
        {{#isMap}}
        {{#isArray}}
        {{/isArray }}
        {{/isMap }}

        {{! primitive type }}
        {{#returnType}}
            {{#returnTypeIsPrimitive}}
                ; jsonToValue(&obj, bourne::json(payload_std_string), "{{returnType}}") ;
            {{/returnTypeIsPrimitive}}
        {{/returnType}}

        {{! Obj constructor }}
        // Der gå rr noget galt her. Den fanger ikke alle klasser. fx getOrderById
        // Kig på default response, og se om man ikke kan sætte en noget derind i. Pet(payload_str)
        {{#returnType}}
            {{#returnContainer}} {{! container er array eller map}}
                {{returnType}}(payload_std_string);
            {{/returnContainer}}
        {{/returnType}}

            Response<
        {{#returnType}}
            {{#returnContainer}}
                {{#isArray}}
                    {{returnType}}<{{returnBaseType}}>
                {{/isArray}}
            {{/returnContainer}}
            {{^returnContainer}}
                {{returnType}}
            {{/returnContainer}}
        {{/returnType}}
        {{^returnType}}
            String
        {{/returnType}}
        > response(obj, httpCode);
            return response;
        }
    {{/operation}}



{{/operations}}
}